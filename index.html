<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>My Video Library</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      margin: 0;
      padding: 20px;
    }

    h1 {
      text-align: center;
      margin-bottom: 10px;
    }

    /* Top input bar */
    .top-bar {
      text-align: center;
      margin-bottom: 30px;
    }

    .top-bar input {
      padding: 10px;
      width: 260px;
      max-width: 90%;
      margin: 5px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    .top-bar button {
      padding: 10px 16px;
      border: none;
      border-radius: 5px;
      background: #007bff;
      color: white;
      cursor: pointer;
    }

    .top-bar button:hover {
      background: #0056b3;
    }

    /* Video grid */
    .video-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      max-width: 1200px;
      margin: auto;
    }

    .video-card {
      background: white;
      padding: 10px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    iframe {
      width: 100%;
      height: 200px;
      border-radius: 6px;
      border: none;
    }

    .title {
      margin-top: 8px;
      font-weight: bold;
      text-align: center;
      font-size: 14px;
    }

    .empty {
      text-align: center;
      color: #666;
      margin-top: 50px;
    }
  </style>
</head>
<body>

<h1>üì∫ My Video Collection</h1>

<!-- üîº Add Video Section -->
<div class="top-bar">
  <input id="videoUrl" placeholder="Paste embed URL (https://c.com/embed/...)" />
  <input id="videoTitle" placeholder="Video title (optional)" />
  <br>
  <button onclick="addVideo()">‚ûï Add Video</button>
</div>

<!-- üé¨ Video Grid -->
<div class="video-grid" id="videoGrid"></div>

<div class="empty" id="emptyMsg" style="display:none;">
  No videos yet. Add one above ‚òùÔ∏è
</div>

<script>
  // üîó PASTE YOUR GOOGLE APPS SCRIPT WEB APP URL HERE
  const API_URL = "https://script.google.com/macros/s/AKfycbzH35gFPsb8sJvkND013zv8kuhBjb3cBkoox2PKclzKKQ7B4ptBPAlzfAbWRRT4UNko/exec";

  async function addVideo() {
    const url = document.getElementById("videoUrl").value.trim();
    const title = document.getElementById("videoTitle").value.trim();

    if (!url) {
      alert("Please paste a video embed URL");
      return;
    }

    await fetch(API_URL, {
      method: "POST",
      body: JSON.stringify({
        url: url,
        title: title || "Untitled Video"
      })
    });

    document.getElementById("videoUrl").value = "";
    document.getElementById("videoTitle").value = "";

    loadVideos();
  }

  async function loadVideos() {
    const grid = document.getElementById("videoGrid");
    const emptyMsg = document.getElementById("emptyMsg");

    const res = await fetch(API_URL);
    const data = await res.json();

    grid.innerHTML = "";

    if (data.length === 0) {
      emptyMsg.style.display = "block";
      return;
    }

    emptyMsg.style.display = "none";

    data.reverse().forEach(row => {
      const [url, title] = row;

      const card = document.createElement("div");
      card.className = "video-card";
      card.innerHTML = `
        <iframe src="${url}" allowfullscreen></iframe>
        <div class="title">${title}</div>
      `;
      grid.appendChild(card);
    });
  }

  // Load videos on page load
  loadVideos();
</script>

</body>
</html>
